(function(){"use strict";var e={6650:function(e,t,i){var n=i(9242),s=i(3396);function l(e,t,i,n,l,o){const a=(0,s.up)("Users");return(0,s.wg)(),(0,s.j4)(a)}i(6699),i(2262),i(4506);var o=i(7139);const a={key:0,class:"page"},r={class:"tabs"},c=["onClick"],d={key:0},u={class:"vtl-options-filters"},h=["title","onClick"],g=["src"],p={key:0,class:"table-section"},m={key:1,class:"units-section"},f={key:0,class:"instances"},b=["title"],y={class:"icon-holder"},v=["src"],w={key:0,class:"unit-statusbar"},x={class:"stats"},k={key:0},C={key:1},D={key:0},_={class:"unit-stats"},L={class:"unit-name"},T={class:"unit-cost"},O={key:0,class:"resources-minerals"},F={key:1,class:"resources-vespene"},I={key:2,class:"resources-supply"},A={class:"unit-combat"},M={key:0,class:"unit-armor"},$=["src"],R={key:1,class:"unit-shield"},V=["src"],S={key:0,class:"cards"},E=["onClick"],U=["title"],j=["src"];function q(e,t,i,n,l,q){const H=(0,s.up)("table-lite");return e.DA?((0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("nav",null,[(0,s._)("ul",r,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.DA.catalogs,((t,i)=>((0,s.wg)(),(0,s.iD)("li",{class:(0,o.C_)({active:e.activeCatalog===t}),key:i,onClick:e=>q.setActiveCatalog(t)},[(0,s.Uk)((0,o.zw)(t.id)+" ",1),e.raceFiltersActive.length?((0,s.wg)(),(0,s.iD)("span",d,"("+(0,o.zw)(t.count)+")",1)):(0,s.kq)("",!0)],10,c)))),128))]),(0,s._)("ul",u,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.DA.races,((t,i)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:i},[!t.race&&t.used?((0,s.wg)(),(0,s.iD)("li",{key:0,title:t.name||t.id,class:(0,o.C_)({active:e.raceFiltersActive.includes(t.id)}),onClick:e=>q.toggleRaceFilter(t)},[(0,s._)("img",{src:q.icon(t)},null,8,g)],10,h)):(0,s.kq)("",!0)],64)))),128))])]),"tech"===e.activeCatalog?.id?((0,s.wg)(),(0,s.iD)("section",p,[(0,s.Wm)(H,{columns:e.dataStructure,rows:e.DA.tech,"options-filter":q.isFiltered,icon:q.icon,styles:q.styles,save:q.save,sortable:e.sortable,"has-filters":!0},null,8,["columns","rows","options-filter","icon","styles","save","sortable"])])):(0,s.kq)("",!0),"tech"!==e.activeCatalog?.id?((0,s.wg)(),(0,s.iD)("section",m,[e.DA?((0,s.wg)(),(0,s.iD)("ul",f,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.DA[e.activeCatalog.id],((t,i)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:i},[q.isFiltered(t,e.activeCatalog.id)?((0,s.wg)(),(0,s.iD)("li",{key:0,title:t.id},[q.isOnScreen(t)?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("span",y,[(0,s._)("img",{src:q.icon(t)},null,8,v)]),t.LifeMax?((0,s.wg)(),(0,s.iD)("span",w,[(0,s._)("span",x,[(0,s._)("div",null,[t.ShieldsMax?((0,s.wg)(),(0,s.iD)("span",k,(0,o.zw)(t.ShieldsMax),1)):(0,s.kq)("",!0),t.LifeMax?((0,s.wg)(),(0,s.iD)("span",C,(0,o.zw)(t.LifeMax),1)):(0,s.kq)("",!0)]),t.EnergyMax?((0,s.wg)(),(0,s.iD)("span",D,(0,o.zw)(t.EnergyMax),1)):(0,s.kq)("",!0)]),t.ShieldsMax?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[t.ShieldsMax<=1e3?((0,s.wg)(),(0,s.iD)("span",{key:0,class:"shields",style:(0,o.j5)({"background-size":Math.ceil(48/(t.ShieldsMax/32))+"px 3px"})},null,4)):t.ShieldsMax<=2e3?((0,s.wg)(),(0,s.iD)("span",{key:1,class:"shields more",style:(0,o.j5)({"background-size":Math.ceil(48/((t.ShieldsMax-1e3)/32))+"px 3px, 2px 3px, 50px 3px"})},null,4)):((0,s.wg)(),(0,s.iD)("span",{key:2,class:"shields evenmore",style:(0,o.j5)({"background-size":Math.max(2,Math.ceil(48/((t.ShieldsMax-2e3)/32)))+"px 2px, 2px 4px, 50px 2px"})},null,4))],64)):(0,s.kq)("",!0),t.LifeMax?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[t.LifeMax<=1e3?((0,s.wg)(),(0,s.iD)("span",{key:0,class:"life",style:(0,o.j5)({"background-size":Math.ceil(48/(t.LifeMax/32))+"px 3px"})},null,4)):t.LifeMax<=2e3?((0,s.wg)(),(0,s.iD)("span",{key:1,class:"life more",style:(0,o.j5)({"background-size":Math.ceil(48/((t.LifeMax-1e3)/32))+"px 3px, 2px 3px, 50px 3px"})},null,4)):((0,s.wg)(),(0,s.iD)("span",{key:2,class:"life evenmore",style:(0,o.j5)({"background-size":Math.max(2,Math.ceil(48/((t.LifeMax-2e3)/32)))+"px 2px, 2px 4px, 50px 2px"})},null,4))],64)):(0,s.kq)("",!0),t.EnergyMax?((0,s.wg)(),(0,s.iD)("span",{key:2,class:"energy",style:(0,o.j5)({"background-size":Math.ceil(25/(t.EnergyMax/32))+"px 3px"})},null,4)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),(0,s._)("div",_,[(0,s._)("span",L,(0,o.zw)(t.id),1),(0,s._)("span",T,[t.Minerals?((0,s.wg)(),(0,s.iD)("span",O,(0,o.zw)(t.Minerals),1)):(0,s.kq)("",!0),t.Food?((0,s.wg)(),(0,s.iD)("span",F,(0,o.zw)(t.Vespene),1)):(0,s.kq)("",!0),t.Food?((0,s.wg)(),(0,s.iD)("span",I,(0,o.zw)(t.Food),1)):(0,s.kq)("",!0)]),(0,s._)("span",A,[void 0!==t.LifeArmorIcon?((0,s.wg)(),(0,s.iD)("span",M,[(0,s._)("span",null,(0,o.zw)(t.LifeArmor),1),(0,s._)("img",{src:q.icon({icon:t.LifeArmorIcon})},null,8,$)])):(0,s.kq)("",!0),void 0!==t.ShieldArmorIcon?((0,s.wg)(),(0,s.iD)("span",R,[(0,s._)("span",null,(0,o.zw)(t.ShieldArmor),1),(0,s._)("img",{src:q.icon({icon:t.ShieldArmorIcon})},null,8,V)])):(0,s.kq)("",!0)]),t.card?((0,s.wg)(),(0,s.iD)("div",S,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.card,((e,t)=>((0,s.wg)(),(0,s.iD)("table",{key:t},[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)([0,1,2],(t=>(0,s._)("tr",{key:t},[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)([0,1,2,3],(i=>(0,s._)("td",{key:i,onClick:n=>q.switchIcon(e[t][i])},[e[t][i]?((0,s.wg)(),(0,s.iD)("span",{key:0,title:e[t][i].at(-1).button},[(0,s._)("img",{src:q.icon(e[t][i].at(-1))},null,8,j)],8,U)):(0,s.kq)("",!0)],8,E))),64))]))),64))])))),128))])):(0,s.kq)("",!0)])],64)):(0,s.kq)("",!0)],8,b)):(0,s.kq)("",!0)],64)))),128))])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)}var H=i(4870),B=i(6265),z=i.n(B);const K={class:"vtl-context-checkbox"},Y=["id","onUpdate:modelValue","onChange"],P=["for"],N={class:"vtl-thead"},W=["onClick"],Z={class:"filter-field"},G={key:0},X=["onUpdate:modelValue"],Q=(0,s.uE)('<svg class="corner-right-top" width="10" height="10" viewBox="0 0 10 10"><path fill="white" d="M 0 0 L 0 0 C 5 0 10 5 10 10 L 10 10 L 10 0"></path></svg><svg class="corner-right-bottom" width="10" height="10" viewBox="0 0 10 10"><path fill="white" d="M 0 10 L 0 10 C 5 10 10 5 10 0 L 10 0 L 10 10"></path></svg><svg class="corner-left-top" width="10" height="10" viewBox="0 0 10 10"><path fill="white" d="M 10 0 L 10 0 C 5 0 0 5 0 10 L 0 10 L 0 0"></path></svg><svg class="corner-left-bottom" width="10" height="10" viewBox="0 0 10 10"><path fill="white" d="M 10 10 L 10 10 C 5 10 0 5 0 0 L 0 0 L 0 10"></path></svg>',4),J={key:1,class:"vtl-tbody-tr vtl-edit-row"},ee=(0,s._)("td",{colspan:"999"},null,-1),te=[ee],ie=["title"],ne=["src"],se=["onClick"],le={key:1,class:"vtl-tbody-tr"},oe=["height"],ae={colspan:"999"},re={class:"vtl-status"},ce=["src"],de={key:1},ue={class:"vtl-status"},he={key:1,class:"vtl-card-body"},ge={class:"xml"},pe=["disabled"],me=["disabled"];function fe(e,t,i,l,a,r){const c=(0,s.up)("v-contextmenu-item"),d=(0,s.up)("v-contextmenu"),u=(0,s.up)("draggable"),h=(0,s.Q2)("contextmenu"),g=(0,s.Q2)("highlightjs");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(d,{ref:"contextmenu"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.columns,((t,i)=>((0,s.wg)(),(0,s.j4)(c,{"hide-on-click":!1,key:i},{default:(0,s.w5)((()=>[(0,s._)("div",K,[(0,s.wy)((0,s._)("input",{id:"checkbox-context"+i,type:"checkbox","onUpdate:modelValue":e=>t.visible=e,onChange:i=>e.toggleColumnVisibility(t)},null,40,Y),[[n.e8,t.visible]]),(0,s._)("label",{for:"checkbox-context"+i},null,8,P)]),(0,s._)("span",null,(0,o.zw)(t.field),1)])),_:2},1024)))),128))])),_:1},512),"TABLE"===e.view?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"vtl-card-body",onKeydown:[t[12]||(t[12]=(0,n.D2)((t=>e.discardChanges()),["esc"])),t[13]||(t[13]=(0,n.D2)((t=>e.applyChanges()),["enter"]))]},[(0,s.Wm)(n.uT,null,{default:(0,s.w5)((()=>[e.editing.col?.options?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"vtl-loading-mask",onClick:t[0]||(t[0]=t=>e.applyChanges())})):(0,s.kq)("",!0)])),_:1}),(0,s._)("table",{class:(0,o.C_)(["vtl-table vtl-table-hover vtl-table-bordered vtl-table-responsive vtl-table-responsive-sm",{"fixed-first-column":e.isFixedFirstColumn,"fixed-first-second-column":e.isFixedFirstColumn}]),ref:"localTable"},[(0,s.wy)(((0,s.wg)(),(0,s.iD)("thead",N,[(0,s.Wm)(u,{modelValue:e.setting.visibleColumns,"onUpdate:modelValue":t[2]||(t[2]=t=>e.setting.visibleColumns=t),tag:"tr","item-key":e=>e,handle:".vtl-thead-column span"},{item:(0,s.w5)((({element:i,index:l})=>[((0,s.wg)(),(0,s.iD)("th",{key:l,class:(0,o.C_)(["vtl-thead-th",{"with-icon":i.icon}]),style:(0,o.j5)({width:i.width?i.width:"auto"})},[(0,s._)("div",{class:(0,o.C_)(["vtl-thead-column",e.theadClasses(i)]),onClick:t=>e.doSort(i)},[(0,s._)("span",null,(0,o.zw)(i.label),1)],10,W),(0,s._)("div",Z,[i.filter?((0,s.wg)(),(0,s.iD)("div",G,[(0,s.wy)((0,s._)("input",{onInput:t[1]||(t[1]=(...t)=>e.applyFilters&&e.applyFilters(...t)),"onUpdate:modelValue":e=>i.filter.value=e},null,40,X),[[n.nr,i.filter.value]])])):(0,s.kq)("",!0)])],6))])),_:1},8,["modelValue","item-key"])])),[[h,void 0,"contextmenu"]]),(0,s._)("tbody",null,[e.editing.row?((0,s.wg)(),(0,s.iD)("tr",{key:0,ref:"edit",onWheel:t[5]||(t[5]=(0,n.iM)((()=>{}),["prevent"])),onTouchmove:t[6]||(t[6]=(0,n.iM)((()=>{}),["prevent"])),onScroll:t[7]||(t[7]=(0,n.iM)((()=>{}),["prevent"])),class:(0,o.C_)([{"modal-edit":e.editing.col.options},"vtl-tbody-tr vtl-edit-row"]),style:(0,o.j5)({top:e.editing.rowPosition})},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.setting.visibleColumns,((i,l)=>((0,s.wg)(),(0,s.iD)("td",{key:l,class:(0,o.C_)({active:e.editing.col===i})},[(0,s._)("div",{class:(0,o.C_)(["vtl-edit",e.editing.positionClass])},[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.editing.value=t),onInput:t[4]||(t[4]=(...t)=>e.filterOptions&&e.filterOptions(...t))},null,544),[[n.nr,e.editing.value]]),Q],2)],2)))),128))],38)):((0,s.wg)(),(0,s.iD)("tr",J,te))]),(0,s.Wm)(u,{modelValue:e.localRows,"onUpdate:modelValue":t[8]||(t[8]=t=>e.localRows=t),tag:"tbody","item-key":"index",class:"vtl-tbody",onClick:t[9]||(t[9]=t=>e.handleTableClick(t))},{item:(0,s.w5)((({element:t,index:i})=>[i>e.minVisibleRow&&i<e.maxVisibleRow?((0,s.wg)(),(0,s.iD)("tr",{key:0,class:(0,o.C_)(["vtl-tbody-tr",{selected:t.$selected}])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.setting.visibleColumns,((i,n)=>((0,s.wg)(),(0,s.iD)("td",{key:n,title:t[i.field],style:(0,o.j5)(i.datasource&&t[i.field]&&e.styles(i.datasource[t[i.field]]))},[i.icon&&t[i.field]?((0,s.wg)(),(0,s.iD)("img",{key:0,src:e.icon(i.datasource[t[i.field]])},null,8,ne)):(0,s.kq)("",!0),(0,s._)("span",{onClick:t=>e.debug(i.datasource)},(0,o.zw)(t[i.field]),9,se)],12,ie)))),128))],2)):((0,s.wg)(),(0,s.iD)("tr",le))])),_:1},8,["modelValue"]),(0,s._)("tr",{height:e.editing.expanderSize},null,8,oe),(0,s._)("tfoot",null,[(0,s._)("tr",null,[(0,s._)("td",ae,[(0,s._)("div",re,(0,o.zw)(e.editing.tableStatus),1)])])])],2),e.editing.col?.options?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"vtl-field-options",style:(0,o.j5)(e.editing.position)},[(0,s._)("ul",{class:"vtl-options-list",onClick:t[10]||(t[10]=t=>e.selectOption(t)),ref:"optionsList",onScroll:t[11]||(t[11]=(...t)=>e.handleDebouncedScrollOptions&&e.handleDebouncedScrollOptions(...t))},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.editing.options,((t,i)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:i},[i>e.minVisibleOption&&i<e.maxVisibleOption?((0,s.wg)(),(0,s.iD)("li",{key:0,style:(0,o.j5)(e.styles(t))},[(0,s._)("img",{src:e.icon(t)},null,8,ce),(0,s._)("span",null,(0,o.zw)(t.id),1)],4)):((0,s.wg)(),(0,s.iD)("li",de))],64)))),128))],544),(0,s._)("div",ue,(0,o.zw)(e.editing.optionsTitle),1)],4)):(0,s.kq)("",!0)],32)):(0,s.kq)("",!0),"XML"===e.view?((0,s.wg)(),(0,s.iD)("div",he,[(0,s.wy)(((0,s.wg)(),(0,s.iD)("pre",null,[(0,s._)("code",ge,(0,o.zw)(e.xml),1)])),[[g]])])):(0,s.kq)("",!0),(0,s._)("div",null,[(0,s._)("button",{class:"vtl-save",disabled:"XML"===e.view,onClick:t[14]||(t[14]=t=>e.xmlData())},"XML",8,pe),(0,s._)("button",{class:"vtl-save",disabled:"TABLE"===e.view,onClick:t[15]||(t[15]=t=>e.tableData())},"TABLE",8,me)])],64)}var be=i(7592),ye=i.n(be),ve=i(7823),we=i(6258),xe=i(5290);i(1703);function ke(e){const t=Object.create(null);return function(i){const n=t[i];return n||(t[i]=e(i))}}const Ce=/-(\w)/g,De=ke((e=>e.replace(Ce,((e,t)=>t.toUpperCase())))),_e=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function Le(e){return _e.includes(e)}function Te(e){return["transition-group","TransitionGroup"].includes(e)}function Oe(e){return["id","class","role","style"].includes(e)||e.startsWith("data-")||e.startsWith("aria-")||e.startsWith("on")}function Fe(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function Ie(e,t,i){const n=0===i?e.children[0]:e.children[i-1].nextSibling;e.insertBefore(t,n)}const Ae=["Start","Add","Remove","Update","End"],Me=["Choose","Unchoose","Sort","Filter","Clone"],$e=["Move"],Re=[$e,Ae,Me].flatMap((e=>e)).map((e=>`on${e}`)),Ve={manage:$e,manageAndEmit:Ae,emit:Me};function Se(e){return-1!==Re.indexOf(e)}function Ee(e){return e.reduce(((e,[t,i])=>(e[t]=i,e)),{})}function Ue({$attrs:e,componentData:t={}}){const i=Ee(Object.entries(e).filter((([e,t])=>Oe(e))));return{...i,...t}}function je({$attrs:e,callBackBuilder:t}){const i=Ee(qe(e));Object.entries(t).forEach((([e,t])=>{Ve[e].forEach((e=>{i[`on${e}`]=t(e)}))}));const n=`[data-draggable]${i.draggable||""}`;return{...i,draggable:n}}function qe(e){return Object.entries(e).filter((([e,t])=>!Oe(e))).map((([e,t])=>[De(e),t])).filter((([e,t])=>!Se(e)))}const He=({el:e})=>e,Be=(e,t)=>e.__draggable_context=t,ze=e=>e.__draggable_context;class Ke{constructor({nodes:{header:e,default:t,footer:i},root:n,realList:s}){this.defaultNodes=t,this.children=[...e,...t,...i],this.externalComponent=n.externalComponent,this.rootTransition=n.transition,this.tag=n.tag,this.realList=s}get _isRootComponent(){return this.externalComponent||this.rootTransition}render(e,t){const{tag:i,children:n,_isRootComponent:s}=this,l=s?{default:()=>n}:n;return e(i,t,l)}updated(){const{defaultNodes:e,realList:t}=this;e.forEach(((e,i)=>{Be(He(e),{element:t[i],index:i})}))}getUnderlyingVm(e){return ze(e)}getVmIndexFromDomIndex(e,t){const{defaultNodes:i}=this,{length:n}=i,s=t.children,l=s.item(e);if(null===l)return n;const o=ze(l);if(o)return o.index;if(0===n)return 0;const a=He(i[0]),r=[...s].findIndex((e=>e===a));return e<r?0:n}}function Ye(e,t){const i=e[t];return i?i():[]}function Pe({$slots:e,realList:t,getKey:i}){const n=t||[],[s,l]=["header","footer"].map((t=>Ye(e,t))),{item:o}=e;if(!o)throw new Error("draggable element must have an item slot");const a=n.flatMap(((e,t)=>o({element:e,index:t}).map((t=>(t.key=i(e),t.props={...t.props||{},"data-draggable":!0},t)))));if(a.length!==n.length)throw new Error("Item slot must have only one child");return{header:s,footer:l,default:a}}function Ne(e){const t=Te(e),i=!Le(e)&&!t;return{transition:t,externalComponent:i,tag:i?(0,s.up)(e):t?n.W3:e}}function We({$slots:e,tag:t,realList:i,getKey:n}){const s=Pe({$slots:e,realList:i,getKey:n}),l=Ne(t);return new Ke({nodes:s,root:l,realList:i})}function Ze(e,t){(0,s.Y3)((()=>this.$emit(e.toLowerCase(),t)))}function Ge(e){return(t,i)=>{if(null!==this.realList)return this[`onDrag${e}`](t,i)}}function Xe(e){const t=Ge.call(this,e);return(i,n)=>{t.call(this,i,n),Ze.call(this,e,i)}}let Qe=null;const Je={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:e=>e},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},et=["update:modelValue","change",...[...Ve.manageAndEmit,...Ve.emit].map((e=>e.toLowerCase()))],tt=(0,s.aZ)({name:"draggableComponent",inheritAttrs:!1,props:Je,emits:et,data(){return{error:!1}},render(){try{this.error=!1;const{$slots:e,$attrs:t,tag:i,componentData:n,realList:l,getKey:o}=this,a=We({$slots:e,tag:i,realList:l,getKey:o});this.componentStructure=a;const r=Ue({$attrs:t,componentData:n});return a.render(s.h,r)}catch(e){return this.error=!0,(0,s.h)("pre",{style:{color:"red"}},e.stack)}},created(){null!==this.list&&null!==this.modelValue&&console.log.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted(){if(this.error)return;const{$attrs:e,$el:t,componentStructure:i}=this;i.updated();const n=je({$attrs:e,callBackBuilder:{manageAndEmit:e=>Xe.call(this,e),emit:e=>Ze.bind(this,e),manage:e=>Ge.call(this,e)}}),s=1===t.nodeType?t:t.parentElement;this._sortable=new xe.ZP(s,n),this.targetDomElement=s,s.__draggable_component__=this},updated(){this.componentStructure.updated()},beforeUnmount(){void 0!==this._sortable&&this._sortable.destroy()},computed:{realList(){const{list:e}=this;return e||this.modelValue},getKey(){const{itemKey:e}=this;return"function"===typeof e?e:t=>t[e]}},watch:{$attrs:{handler(e){const{_sortable:t}=this;t&&qe(e).forEach((([e,i])=>{t.option(e,i)}))},deep:!0}},methods:{getUnderlyingVm(e){return this.componentStructure.getUnderlyingVm(e)||null},getUnderlyingPotencialDraggableComponent(e){return e.__draggable_component__},emitChanges(e){(0,s.Y3)((()=>this.$emit("change",e)))},alterList(e){if(this.list)return void e(this.list);const t=[...this.modelValue];e(t),this.$emit("update:modelValue",t)},spliceList(){const e=e=>e.splice(...arguments);this.alterList(e)},updatePosition(e,t){const i=i=>i.splice(t,0,i.splice(e,1)[0]);this.alterList(i)},getRelatedContextFromMoveEvent({to:e,related:t}){const i=this.getUnderlyingPotencialDraggableComponent(e);if(!i)return{component:i};const n=i.realList,s={list:n,component:i};if(e!==t&&n){const e=i.getUnderlyingVm(t)||{};return{...e,...s}}return s},getVmIndexFromDomIndex(e){return this.componentStructure.getVmIndexFromDomIndex(e,this.targetDomElement)},onDragStart(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),Qe=e.item},onDragAdd(e){const t=e.item._underlying_vm_;if(void 0===t)return;Fe(e.item);const i=this.getVmIndexFromDomIndex(e.newIndex);this.spliceList(i,0,t);const n={element:t,newIndex:i};this.emitChanges({added:n})},onDragRemove(e){if(Ie(this.$el,e.item,e.oldIndex),"clone"===e.pullMode)return void Fe(e.clone);const{index:t,element:i}=this.context;this.spliceList(t,1);const n={element:i,oldIndex:t};this.emitChanges({removed:n})},onDragUpdate(e){Fe(e.item),Ie(e.from,e.item,e.oldIndex);const t=this.context.index,i=this.getVmIndexFromDomIndex(e.newIndex);this.updatePosition(t,i);const n={element:this.context.element,oldIndex:t,newIndex:i};this.emitChanges({moved:n})},computeFutureIndex(e,t){if(!e.element)return 0;const i=[...t.to.children].filter((e=>"none"!==e.style["display"])),n=i.indexOf(t.related),s=e.component.getVmIndexFromDomIndex(n),l=-1!==i.indexOf(Qe);return l||!t.willInsertAfter?s:s+1},onDragMove(e,t){const{move:i,realList:n}=this;if(!i||!n)return!0;const s=this.getRelatedContextFromMoveEvent(e),l=this.computeFutureIndex(s,e),o={...this.context,futureIndex:l},a={...e,relatedContext:s,draggedContext:o};return i(a,t)},onDragEnd(){Qe=null}}});var it=tt;i(2368);let nt=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});var st=(0,s.aZ)({directives:{highlightjs:(e,t)=>{const i=e.querySelectorAll("code");for(let n=0;n<i.length;n++){const e=i[n];"string"===typeof t.value&&(e.textContent=t.value),ye().highlightBlock(e)}},contextmenu:we.XM},components:{draggable:it,[we.VS.name]:we.VS,[we.m_.name]:we.m_},name:"my-table",emits:["return-checked-rows","do-search","is-finished","row-clicked"],props:{hasFilters:{type:Boolean,default:!1},checkedReturnType:{type:String,default:"key"},isFixedFirstColumn:{type:Boolean,default:!1},columns:{type:Array,default:()=>[]},rows:{type:Array,default:()=>[]},rowClasses:{type:[Array,Function],default:()=>[]},total:{type:Number,default:-1},optionsFilter:{type:Function,default:e=>!0},icon:{type:Function,default:e=>""},save:{type:Function,default:(e,t)=>""},styles:{type:Function,default:e=>null},sortable:{type:Object,default:()=>({order:"id",sort:"asc"})}},mounted(){this.applyFilters(),this.handleDebouncedScroll=(0,ve.debounce)(this.updateRowsVisibility,50),this.handleDebouncedScrollOptions=(0,ve.debounce)(this.updateOptionsVisibility,50),this.$refs.localTable.addEventListener("scroll",this.handleDebouncedScroll)},methods:{tableData(){this.view="TABLE"},xmlData(){let e=this.save(this.rows,this.columns);this.view="XML",this.xml=e},debug(e){window.x=e},toggleColumnVisibility(e){e.visible?this.setting.visibleColumns.push(e):this.setting.visibleColumns.splice(this.setting.visibleColumns.indexOf(e),1),this.columnsWithOptions=this.setting.visibleColumns.filter((e=>e.options))},theadClasses(e){return{"vtl-sortable":e.sortable,"vtl-both":e.sortable,"vtl-asc":this.setting.order===e.field&&"asc"===this.setting.sort,"vtl-desc":this.setting.order===e.field&&"desc"===this.setting.sort}},updateOptionsVisibility(){if(!this.editing.options.length)return this.minVisibleOption=0,this.maxVisibleOption=0,void delete this.editing.optionsTitle;let e=Array.prototype.at.call(this.$refs.optionsList.children,-1).clientHeight,t=Math.floor(this.$refs.optionsList.scrollTop/e),i=Math.ceil(this.$refs.optionsList.clientHeight/e);this.minVisibleOption=t-i,this.maxVisibleOption=Math.min(t+i+i,this.editing.options.length),this.editing.options.length>i?this.editing.optionsTitle=`${t+1}-${t+i} / ${this.editing.options.length}`:this.editing.optionsTitle=`${this.editing.options.length} / ${this.editing.options.length}`},updateRowsVisibility(){let e=this.$refs.localTable;if(this.localRows.length){let t=e.tBodies[1].children[0].clientHeight,i=Math.floor(e.scrollTop/t),n=Math.ceil((e.clientHeight-e.tHead.clientHeight-e.tFoot.clientHeight-e.tBodies[0].clientHeight)/t);this.minVisibleRow=i-n,this.maxVisibleRow=Math.min(i+n+n,this.localRows.length),this.localRows.length>n?this.editing.tableStatus=`${i+1}-${i+n} / ${this.localRows.length}`:this.editing.tableStatus=`${this.localRows.length} / ${this.localRows.length}`}else this.minVisibleRow=0,this.maxVisibleRow=0,this.editing.tableStatus="";this.editing.expanderSize=e.clientHeight-e.tHead.clientHeight-e.tFoot.clientHeight-e.tBodies[0].clientHeight-e.tBodies[1].clientHeight},toggleRowSelection(e){e.$selected=!e.$selected,e.$selected?this.setting.selectedRows.push(e):this.setting.selectedRows.splice(this.setting.selectedRows.indexOf(e),1)},headerStyle(e){return{width:e.width?e.width:"auto"}},headerClass(e){return{"vtl-sortable":e.sortable,"vtl-both":e.sortable,"vtl-asc":this.setting.order===e.field&&"asc"===this.setting.sort,"vtl-desc":this.setting.order===e.field&&"desc"===this.setting.sort}},isEditing(e,t){return this.editing.row===e&&this.editing.col===t},discardChanges(){this.editing.row=null,this.editing.col=null,this.editing.value=null},applyChanges(){this.editing.row[this.editing.col.field]=this.editing.value,this.editing.row=null,this.editing.col=null,this.editing.value=null},selectOption(e){if("UL"===e.target.nodeName)return!1;let t=e.target;while("LI"!==t.nodeName)t=t.parentElement;let i=t.parentElement,n=Array.prototype.indexOf.call(i.children,t);if(n<0)return!1;let s=this.editing.options[n];this.editing.value=s.id,this.applyChanges()},handleTableClick(e){if(this.$refs.contextmenu.visible)return!1;if("TBODY"===e.target.nodeName||"TR"===e.target.nodeName)return this.discardChanges(),!1;let t=e.target;while("TD"!==t.nodeName)t=t.parentElement;let i=t.parentElement,n=i.parentElement,l=Array.prototype.indexOf.call(i.children,t),o=Array.prototype.indexOf.call(n.children,i);if(o<0)return!1;this.editing.row?(this.applyChanges(),(0,s.Y3)((()=>{this.edit(o,l)}))):this.edit(o,l)},edit(e,t){let i=this.localRows[e],n=this.setting.visibleColumns[t];if(0===t&&this.toggleRowSelection(i),!1===n.editable)return;let l=this.$refs.localTable.tBodies[1].children[e];this.editing.row=i,this.editing.col=n,this.editing.columnIndex=t,this.editing.value=i[n.field],this.editing.rowPosition=l.offsetTop+l.clientHeight+"px",this.filterOptions(),(0,s.Y3)((()=>{this.$refs.edit.children[t].getElementsByTagName("input")[0].focus(),this.showOptions()}))},showOptions(){if(!this.editing.col.options)return void(this.editing.positionClass="");let e=this.$refs.localTable.clientWidth,t=this.$refs.localTable.clientHeight,i=this.editing.position,n=this.$refs.edit.children[this.editing.columnIndex].getBoundingClientRect(),s=e-n.right,l=t-n.bottom;s>n.left?(i.left=Math.round(n.left+n.width)+"px",i.right="auto",this.editing.positionClass="rightside"):(i.right=Math.round(s+n.width)+"px",i.left="auto",this.editing.positionClass="leftside"),n.top>l?(i.bottom=Math.round(Math.max(l-100,5))+"px",i.top="auto"):(i.top=Math.round(Math.max(n.top-100,5))+"px",i.bottom="auto")},filterOptions(){if(!this.editing.col.options)return;let e=this.editing.value?.toLowerCase();this.editing.options=this.editing.col.options.filter((t=>!1!==t.selectable&&(this.optionsFilter(t,this.editing.col.field)&&(!e||t.id.toLowerCase().includes(e))))),(0,s.Y3)((()=>{this.updateOptionsVisibility()}))},applyFilters(){let e={};this.columns.forEach((t=>{t.filter?.value&&(e[t.field]=t.filter.value.toLowerCase())})),this.localRows=this.rows.filter((t=>{for(let i in e)if("index"===i){if(t[i].toString()!==e[i])return!1}else if(!t[i]?.toLowerCase().includes(e[i]))return!1;return!0})),(0,s.Y3)((()=>{this.updateRowsVisibility()}))},doSort(e){if(!e.sortable)return;let t=e.field,i="asc";t===this.setting.order&&"asc"===this.setting.sort&&(i="desc"),this.setting.order=t,this.setting.sort=i,"desc"===this.setting.sort?this.localRows.sort(((e,i)=>-nt.compare(e[t],i[t]))):this.localRows.sort(((e,i)=>nt.compare(e[t],i[t])))}},computed:{keyColumn(e){let t="";return Object.assign(e.columns).forEach((e=>{e.isKey&&(t=e.field)})),t}},data(){return{localRows:[],view:"TABLE",selectedRows:[],minVisibleRow:0,maxVisibleRow:0,minVisibleOption:0,maxVisibleOption:0}},setup(e){let t=[],i=[];e.columns.forEach((e=>{e.visible=!0,t.push(e),e.filter&&(e.filter.value=""),e.options&&i.push(e)}));const n=(0,H.qj)({editorTools:!1,row:null,col:null,value:null,position:{},positionClass:""}),s=(0,H.qj)({selectedRows:[],visibleColumns:t,isCheckAll:!1,order:e.sortable.order,sort:e.sortable.sort});return{columnsWithOptions:i,setting:s,editing:n,tBody:(0,H.iH)(null),localTable:(0,H.iH)(null),optionsList:(0,H.iH)(null),rowCheckbox:(0,H.iH)([])}}}),lt=i(89);const ot=(0,lt.Z)(st,[["render",fe]]);var at=ot,rt=i(9058),ct=i.n(rt),dt=i(5551),ut=i.n(dt);const ht=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),gt=new(ct().Builder),pt={icon:"ui_ingame_help_techtree_questionmark"},mt=(e,...t)=>ut().withOptions(e,t,{arrayBehaviour:"merge"});function ft(e,t,i){let n=[{label:"#",field:"index",editable:!1,filter:{method:"contains",value:""},width:"5%",sortable:!0,isKey:!0},{label:"ID",field:"id",width:"30%",filter:{method:"contains",value:""},unique:!0,sortable:!0},...i.sort(((e,t)=>e.EditorColumn>t.EditorColumn)).map((i=>Object.assign({label:i.id,field:i.id,sortable:!0,visible:!!i.EditorColumn,type:i.Type,filter:{method:"contains",value:""},width:("Int"===i.Type?5:30)+"%",icon:bt[i.Type]?.icon,datasource:t[bt[i.Type]?.catalog],options:e[bt[i.Type]?.catalog]})))];return n}const bt={Image:{catalog:"icons",icon:!0},UpgradeLevel:{catalog:"UpgradeLevel",icon:!1},CommanderType:{catalog:"CommanderType",icon:!1},AbilCmd:{catalog:"abilities",icon:!0},Behavior:{catalog:"behaviors",icon:!0},Upgrade:{catalog:"upgrades",icon:!0},Button:{catalog:"buttons",icon:!0},Race:{catalog:"races",icon:!0},Unit:{catalog:"units",icon:!0},PlayerPrestige:{catalog:"prestiges",icon:!0},PlayerCommanders:{catalog:"commanders",icon:!0},CommanderTech:{catalog:"tech",icon:!0}};let yt={icons:[],wireframes:[],races:[],buttons:[]};function vt(e,t,i){let n=[];for(let s in e){let t=Object.keys(bt)[Object.values(bt).indexOf(Object.values(bt).find((e=>e.catalog===s)))],l={$:{id:t},Instances:[],Fields:[]};for(let e of i[s]){let{Type:t,EditorColumn:i}=e,n={$:{Id:e.id,EditorColumn:i||0}};["Upgrade","Unit","AbilCmd","Int","Image"].includes(t)?n.$.Type=t:["Race","Behavior","Button"].includes(t)?(n.$.Type="GameLink",n.$.GameLinkType=t):(n.$.Type="User",n.$.UserType=t),l.Fields.push(n)}for(let n of e[s]){let e={};for(let t in n)if("index"!==t)if("id"===t)e.$={Id:n.id};else{let l=i[s].find((e=>e.id===t)).Type,o=n[t],a=l,r={$:{},Field:[{$:{Id:t}}]};switch(l){case"Behavior":a="GameLink",r.$.GameLink=o;break;case"AbilCmd":if(o.includes(",")){let[e,t]=o.split(",");r.$.Abil=e,"0"!==t&&(r.$.Cmd=t)}else r.$.Abil=o;break;case"Unit":case"Upgrade":case"Int":case"Image":r.$[l]=o;break;default:a="User",r.$.Type=l,r.$.Instance=o}e[a]||(e[a]=[]),e[a].push(r)}l.Instances.push(e)}n.push(l)}return gt.buildObject({Catalog:{CUser:n}})}function wt(e,t){return e?e.icon&&!e.iconbroken?`assets/buttons/${e.icon}.png`:e.button&&t.buttons[e.button]?wt(t.buttons[e.button]):e.race?wt(t.races[e.race]):wt(pt):wt(pt)}function xt(e,t){let i=t.button;!i||e.buttons[i]||yt.buttons.includes(i)||yt.buttons.push(i)}function kt(e,t){if(t.race)if(e.races[t.race])e.races[t.race].used=!0;else if(!yt.races.includes(t.race)){yt.races.push(t.race);t.race}}function Ct(e){let t={buttons:[],tech:[],commanders:[],prestiges:[],units:[],upgrades:[],abilities:[],behaviors:[],races:[{id:"all",selectable:!1,used:!0,name:"All Races",icon:"ui_battlenet_glue_coop_newuser_splashicon"},{id:"none",selectable:!1,used:!0,name:"No Race",icon:"sc2_ui_coop_circularprogress_basic_bar"}]},i={Image:[],Int:[],String:[],Text:[],AbilCmd:[{id:"race",Type:"Race"},{id:"icon",Type:"Image"}],Behavior:[{id:"race",Type:"Race"},{id:"icon",Type:"Image"}],Upgrade:[{id:"race",Type:"Race"},{id:"icon",Type:"Image"}],Button:[{id:"race",Type:"Race"},{id:"icon",Type:"Image"}],Race:[{id:"race",Type:"Race"},{id:"icon",Type:"Image"}],Unit:[{id:"race",Type:"Race"},{id:"icon",Type:"Image"}],UpgradeLevel:[],CommanderType:[],PlayerPrestige:[{id:"race",Type:"Race"},{id:"icon",Type:"Image"}],PlayerCommanders:[{id:"race",Type:"Race"},{id:"icon",Type:"Image"}],CommanderTech:[{id:"race",Type:"Race"},{id:"icon",Type:"Image"}]};mt(e,{races:{ued:{color:"#ffffa4"},Gen:{color:"#80f0ff"},Keir:{color:"#ffff80"},Xayi:{color:"#ff7129"},Prot:{color:"#4bb6fd"},Terr:{color:"#4da05f"},Zerg:{color:"#8b49ff"},Neut:{color:"#e7e7e7"},Dragon:{color:"#ff1a1a"},NHbr:{color:"#000000"},UPL:{color:"#acd9ff"},Keiron:{race:"Keir"},Genetron:{race:"Gen"},Xayid:{race:"Xayi"},Protoss:{race:"Prot"},Terran:{race:"Terr"},UED:{race:"ued"},InfestedTerran:{race:"TerrI"},PrimalZerg:{race:"ZergP"},Neutral:{race:"Neut"}}});for(let n of["abilities","prestiges"])for(let t in e[n]){let i=e[n][t];xt(e,i)}t.icons=e.icons,e.icons={};for(let n in t.icons)t.icons[n]=e.icons[t.icons[n]]={id:t.icons[n],icon:t.icons[n]};for(let n in e.abilities){let i=e.abilities[n];if(kt(e,i),i.id=n,i.info){for(let s in i.info){let l=i.info[s],o=+s.match(/\D+(\d+)/)[1]-1,a=n+","+o;l.id=a,l.race=i.race,xt(e,l),e.abilities[a]=l,t.abilities.push(l)}delete e.abilities[n]}else t.abilities.push(i)}t.abilities.sort(((e,t)=>ht.compare(e.id,t.id)));for(let n of["races","buttons","commanders","units","upgrades","behaviors","prestiges"]){for(let i in e[n]){let s=e[n][i];kt(e,s),s.id=i,t[n].push(s)}t[n].sort(((e,t)=>ht.compare(e.id,t.id)))}for(let n of t.units){let e=n.card;if(e){let t=[];for(let i of e){let e=[[],[],[]];t.push(e);for(let t in i){let[n,s]=t.split("x");for(let l in i[t])e[s][n]||(e[s][n]=[]),e[s][n].push({button:i[t][l]})}}n.card=t}}e.catalogs={tech:{id:"tech"},buttons:{id:"buttons"},units:{id:"units"},upgrades:{id:"upgrades"},abilities:{id:"abilities"},behaviors:{id:"behaviors"}},t.catalogs=Object.values(e.catalogs),t.UpgradeLevel=e.UpgradeLevel,e.UpgradeLevel={};for(let n of t.UpgradeLevel)e.UpgradeLevel[n.id]=n;t.tech=e.tech,e.tech={};for(let n=0;n<t.tech.length;n++){let i=t.tech[n];Object.defineProperty(i,"index",{get:()=>t.tech.indexOf(i),set:e=>{},enumerable:!0,configurable:!0}),i.ability&&e.abilities[i.ability+",0"]&&(i.ability+=",0"),e.tech[i.id]=i}return window.DO=e,window.DA=t,window.CF=i,{DA:t,DO:e,CF:i}}var Dt={name:"UsersComponent",components:{TableLite:at},methods:{switchIcon(e){e?.length>1&&e.unshift(e.pop())},isOnScreen(e){return!0},isFiltered(e,t){return!!this.raceFiltersActive.includes("all")||(e.race?this.raceFiltersActive.includes(this.DO.races[e.race]?.race||e.race):this.raceFiltersActive.includes("none"))},setActiveCatalog(e){this.activeCatalog=e},icon(e){return wt(e,this.DO)},styles(e){return!!e&&(e.color?{"background-color":e.color+"22"}:e.race?this.styles(this.DO.races[e.race]):null)},updateRaceCounters(e){if(this.raceFiltersActive.length)for(let t of this.DA.catalogs){let e=0;for(let i of this.DA[t.id])this.isFiltered(i)&&e++;t.count=e}},toggleRaceFilter(e){this.raceFiltersActive.includes(e.id)?this.raceFiltersActive.splice(this.raceFiltersActive.indexOf(e.id),1):this.raceFiltersActive.push(e.id),this.updateRaceCounters()},download(e,t){let i="data:text/plain;charset=utf-8,"+encodeURIComponent(t);window.open(i,"_blank")},save(){return vt({tech:this.DA.tech},this.DO,this.CF)},getEditorData(e){let{DA:t,DO:i,CF:n}=Ct(e);n.tech=i.techFields,delete i.techFields;for(let s of n.tech)n[s.Type].find((e=>"race"===e.id))&&(this.isRaceFiltered[s.id]=!0);this.dataStructure=ft(t,i,n.tech),this.DA=t,this.DO=i,this.CF=n,this.activeCatalog=i.catalogs.tech,this.updateRaceCounters()}},created(){z().get("./gamedata.json").then((e=>this.getEditorData(e.data)))},data(){return(0,H.qj)({isRaceFiltered:{},raceFiltersActive:["all"],activeCatalog:null,sortable:{order:"index",sort:"asc"},dataStructure:null,DA:null,DO:null})}};const _t=(0,lt.Z)(Dt,[["render",q]]);var Lt=_t,Tt={name:"App",components:{Users:Lt}};const Ot=(0,lt.Z)(Tt,[["render",l]]);var Ft=Ot;(0,n.ri)(Ft).mount("#app")}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var l=t[n]={exports:{}};return e[n].call(l.exports,l,l.exports,i),l.exports}i.m=e,function(){var e=[];i.O=function(t,n,s,l){if(!n){var o=1/0;for(d=0;d<e.length;d++){n=e[d][0],s=e[d][1],l=e[d][2];for(var a=!0,r=0;r<n.length;r++)(!1&l||o>=l)&&Object.keys(i.O).every((function(e){return i.O[e](n[r])}))?n.splice(r--,1):(a=!1,l<o&&(o=l));if(a){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[n,s,l]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,l,o=n[0],a=n[1],r=n[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(s in a)i.o(a,s)&&(i.m[s]=a[s]);if(r)var d=r(i)}for(t&&t(n);c<o.length;c++)l=o[c],i.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return i.O(d)},n=self["webpackChunkvueapp"]=self["webpackChunkvueapp"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(6650)}));n=i.O(n)})();
//# sourceMappingURL=app.3fc1f5d8.js.map